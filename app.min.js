const revealContainers=document.querySelectorAll(".reveal-container"),revealSelf=document.querySelectorAll(".reveal-self"),observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.remove("hidden"),observer.unobserve(e.target))})},{rootMargin:"-50% 0px -50% 0px"});"IntersectionObserver"in window&&(revealContainers.forEach(e=>{e.classList.add("hidden");const t=e.querySelectorAll(".reveal");for(let e=0;e<t.length;e++)t[e].style.transitionDelay=`${.2*e}s`;observer.observe(e)}),revealSelf.forEach(e=>{e.classList.add("hidden"),observer.observe(e)}));const anchorLinks=document.querySelectorAll('a[href^="#"]');anchorLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let r=document.getElementById(e.getAttribute("href").substr(1)).offsetTop-78;"#contact"===e.getAttribute("href")&&(r-=document.querySelector("footer .important-div").offsetHeight/2+30),window.scrollTo({top:r,behavior:"smooth"})})});let targetedElement=document.getElementById(document.location.hash.substr(1));targetedElement&&window.scrollTo({top:targetedElement.offsetTop-78,behavior:"smooth"});const carousel=document.querySelector(".carousel"),slider=carousel.querySelector(".slider"),carouselPrevBtn=document.querySelector(".carousel-previous-btn"),carouselNextBtn=document.querySelector(".carousel-next-btn");let initialSliderTransform=-33.3,sliderTransform=initialSliderTransform;refreshSliderTransform();let canClick=!0;carouselPrevBtn.addEventListener("click",()=>{carouselBtnClick(-1)}),carouselNextBtn.addEventListener("click",()=>{carouselBtnClick(1)});let interval=setInterval(carouselBtnClick,5e3);function refreshSliderTransform(){initialSliderTransform=window.matchMedia("(max-width: 580px)").matches?-100:window.matchMedia("(max-width: 768px)").matches?-50:-33.3,sliderTransform=initialSliderTransform,slider.style.transform=`translateX(${sliderTransform}%)`}function carouselBtnClick(e){e&&(clearInterval(interval),interval=setInterval(carouselBtnClick,5e3)),e=e?-1*e:-1,canClick&&(canClick=!1,slider.style.transition="transform .5s",sliderTransform-=initialSliderTransform*e,slider.style.transform=`translateX(${sliderTransform}%)`,setTimeout(()=>{slider.style.transition="none",-1===e?slider.appendChild(slider.firstElementChild):slider.prepend(slider.lastElementChild),sliderTransform+=initialSliderTransform*e,slider.style.transform=`translateX(${sliderTransform}%)`,canClick=!0},500))}window.addEventListener("resize",refreshSliderTransform);const sensibility=20;let touchStart,touching=!1,offset=0;carousel.addEventListener("touchstart",e=>{canClick&&(canClick=!1,touching=!0,touchStart=e.targetTouches[0].clientX)},{passive:!0}),carousel.addEventListener("touchmove",e=>{if(touching){const t=slider.offsetWidth*(initialSliderTransform/-100);offset=Math.abs(e.targetTouches[0].clientX-touchStart)<=t+.021*slider.offsetWidth?e.targetTouches[0].clientX-touchStart:e.targetTouches[0].clientX-touchStart>t+.021*slider.offsetWidth?t+.021*slider.offsetWidth:-1*(t+.021*slider.offsetWidth),slider.style.transform=`translateX(calc(${initialSliderTransform}% + ${offset}px))`}},{passive:!0}),carousel.addEventListener("touchend",()=>{touching&&(canClick=!0,touching=!1,offset>20?carouselBtnClick(-1):offset<-20?carouselBtnClick(1):(slider.style.transform=`translateX(${initialSliderTransform}%)`,clearInterval(interval),interval=setInterval(carouselBtnClick,5e3)))}),document.getElementById("start-project-btn").addEventListener("click",()=>{document.querySelector("form input").focus()});const inputs=document.querySelectorAll("footer form input, footer form textarea"),textarea=document.querySelector("form textarea");function checkInputValidity(e){const t=e.parentNode;""===e.value?t.classList.remove("not-empty"):t.classList.add("not-empty"),e.checkValidity()?t.classList.remove("invalid"):t.classList.add("invalid")}inputs.forEach(e=>{e.addEventListener("input",()=>{checkInputValidity(e)})}),document.querySelector('form button[type="submit"]').addEventListener("click",()=>{inputs.forEach(e=>{checkInputValidity(e)})}),textarea.addEventListener("input",()=>{textarea.style.height="auto",textarea.style.height=`${textarea.scrollHeight}px`});const form=document.querySelector("form"),formMsg=form.querySelector(".info"),submitBtn=form.querySelector('button[type="submit"]');form.addEventListener("submit",e=>{e.preventDefault(),formMsg.innerHTML="Le message est en cours d'envoi...",formMsg.classList.remove("error"),formMsg.style.display="block",fetch("/send-mail/",{method:"POST",body:new URLSearchParams(new FormData(form))}).then(e=>e.json()).then(e=>{setTimeout(()=>{if(!0===e.success)formMsg.innerHTML="Le message a bien été envoyé.",submitBtn.setAttribute("disabled","");else if(formMsg.classList.add("error"),e.errors.length<1)formMsg.innerHTML="Une erreur est survenue.";else{formMsg.innerHTML="";for(let t=0;t<e.errors.length;t++)formMsg.innerHTML+=e.errors[t],t<e.errors.length-1&&(formMsg.innerHTML+="<br>")}},400)}).catch(()=>{formMsg.classList.add("error"),formMsg.innerHTML="Une erreur est survenue."})});